"use strict";

const express = require('express');
const app = express();
const path = require('path');


app.set('view engine', 'ejs');


app.use(express.urlencoded({ extended: true }));


app.use("/public", express.static(path.join(__dirname, 'public')));


let doraemonList = [
    { id: 1, title: 'のび太の恐竜', year: 1980, revenue: '15.6億円', director: '福富博', explain: 'スネ夫のパパのアメリカ土産「恐竜のツメの化石」を見せてもらえなかったのび太は本物の恐竜を見つけると宣言、やむなく、のび太は化石発掘を始め、悪戦苦闘の末、化石らしき物を見つけた。ドラえもんのタイム風呂敷にかぶせて一億年前の姿に戻すと、これが巨大なタマゴ。それから毎日、のび太はふとんの中でそれ抱いて寝た。' },
    { id: 2, title: 'のび太の宇宙開拓史', year: 1981, revenue: '17.4億円', director: '西牧秀夫', explain: '超空間のもつれで、偶然、のび太の部屋の下が、宇宙の星コーヤコーヤの入口になっていた。コーヤコーヤに降りたのび太とドラえもんは、洪水で流された宇宙船をさがすロップルと星猫チャミーの一家に会った。タケコプターで土に埋れた宇宙船を発見してやるドラえもん。ある日、二人はジャイアン、スネオ、しずかを誘ってコーヤコーヤへ案内した。' },
    { id: 3, title: 'のび太の大魔境', year: 1982, revenue: '12.1億円', director: '西牧秀夫', explain: '春休みのある日、のび太の家に一匹の子犬が迷い込んで来た。その子犬ペコは、山と積まれた航空写真の中から、コンゴにある不思議な巨神像の写真を探し出した。のび太、ドラえもん、スネ夫、ジャイアン、しずかたちはどこでもドアでアフリカに巨神像の謎を解きに行くことにした。巨神像はバウワンコの神といって、その実物を見た者はいないのだ。そして伝説によると、そこには犬の王国があるのだという。' },
    { id: 4, title: 'のび太の海底鬼岩城', year: 1983, revenue: '10億円', director: '芝山努', explain: '夏休みにドラえもんとのび太たちは海の底でキャンプをすることに。のび太たちは海底キャンプを楽しむが、突然、大イカに襲われ、危ないところを海底人に助けられる。海の底には人間から隠れて暮らす海底人の国“ムー連邦”があったのだ。のび太たちは海底人に幽閉されるが、エルという海底人と友だちになる。そんなとき、バミューダ・トライアングルにある鬼岩城のコンピュータ“ポセイドン”が攻撃をしかけてくる。ポセイドンはとうの昔に滅んだ国“アトランティス”のコンピュータで、海底火山の噴火を敵の攻撃と勘違いして攻撃を始めたのだ。果たしてドラえもんたちはポセイドンを止められるのか!?' },
    { id: 5, title: 'のび太の魔界大冒険', year: 1984, revenue: '16.3億円', director: '芝山努', explain: '夢の中で魔法を使って活躍したのび太は、目覚めても魔法が使えたらなーと空想する。ある日、ドラえもんとのび太の石像が二人の前に忽然とあらわれ、翌日には姿を消した。のび太はドラえもんにせがみ、「もしもボックス」を使って魔法の世界に入り込む。ここでは人々が箒や絨氈に乗って空を飛んでいた。しかし、ここでものび太は小石一つも空中に浮遊できないダメ少年だった。ふとしたことで知りあった満月博士とその娘の美夜子ちゃんから、地球におそろしい魔界が接近していることを聞かされた。' },
    { id: 6, title: 'のび太の宇宙小戦争', year: 1985, revenue: '11.8億円', director: '芝山努', explain: 'ドラえもんとのび太、しずかはビデオを撮影中に小さなロケットを発見する。そのロケットは“ピリカ星”の大統領パピが乗ってきたものだった。パピは独裁政治を行おうとしている反乱軍から身を隠すため、地球に逃れてきたのだ。だが、反乱軍の首謀者ギルモア将軍は、パピを捕らえようと追跡部隊をさし向けてくる。パピを守るため、ひみつ道具の“スモールライト”でパピと同じ大きさになり、“かべ紙ひみつ基地”にパピをかくまうドラえもんたち。だが、ギルモア将軍の手下にスモールライトを奪われたうえ、しずかを人質にとられてしまい…!?' },
    { id: 7, title: 'のび太と鉄人兵団', year: 1986, revenue: '12.5億円', director: '芝山努', explain: '夏休み－－。のび太の家の庭に巨大な機械のパーツが降って来た。家の中では狭すぎると、のび太はドラえもんの助けを借りて"逆世界入りこみオイル"で鏡の中の世界へと運びこんだ。その後からも次々と降って来るパーツを全部集めて組み立てると、何と巨大ロボットができあがった。のび太たちは、ザンダクロスと名付けたそのロボットで鏡の中を遊び回る。そんなある日、町に不思議な少女が現われた。' },
    { id: 8, title: 'のび太と竜の騎士', year: 1987, revenue: '15億円', director: '芝山努', explain: 'のび太は0点のテストをママから隠すため、ドラえもんに頼み"どこでもホール"で地下室を作った。そして、しずか、ジャイアン、スネ夫を呼ぶと、思いきり好きなことができるのでみんな大喜び。ところが、恐竜の姿を追っていったスネ夫が地底の奥深く迷いこんでしまった。ドラえもんたちはスネ夫を探しに出かけるが、恐竜に追いかけられたあげく、人食い人種のナンジャ族につかってしまった。そこへ現われたのが、竜の騎士バンホー。彼はスネ夫を保護してると言う。地磁気で走る帆船に乗ったのび太たちは、地底国の首都エンリル市に着いた。' },
    { id: 9, title: 'のび太のパラレル西遊記', year: 1988, revenue: '13.6億円', director: '芝山努', explain: 'のび太は「西遊記」の劇に出ることになったが、脇役で妖怪の一人なので面白くなかった。本当は孫悟空をやりたかったのだ。のび太は本物が見たくて、タイムマシンで当時のシルクロードへ向かった。そこでのび太は女の子に悟空と間違えられて大喜び。しかし、戻って来て皆に報告するが、誰も信じてくれない。' },
    { id: 10, title: 'のび太の日本誕生', year: 1989, revenue: '20.2億円', director: '芝山努', explain: 'ドラえもん、のび太、しずか、ジャイアン、スネ夫は宿題やお手伝いなどそれぞれの理由で家出を決意。タイムマシンで7万年前の日本にやって来た。しかし、原始時代の少年ククルが入れ代わり現代へ。ドラえもんたちは原始生活を始めたが、そこは嵐と雷を繰る精霊王ギガゾンビと手下のクラヤミ族に支配され、ヒカリ族のククルの両親も捕虜として捕まっていた。ドラえもんたちはギガゾンビに戦いを挑むが、その正体は世界征服を企む未来の犯罪者で最後はタイム・パトロールに捕まえてもらったのだった。' },
    { id: 11, title: 'のび太とアニマル惑星（プラネット）', year: 1990, revenue: '19億円', director: '芝山努', explain: '夜、ふと目覚めたのび太は、家の中に漂い出ているピンク色の靄に夢うつつのまま踏み込む。そして、見たことのない深い森の中にいることに気付いたのび太は、そこに絵本に出てくるような人間の姿をした動物たちを見る。翌日、ドラえもんと共に例の森に入ったのび太は、そこでチッポという犬の顔の少年と出会い親しくなる。ここでは様々な動物の顔をした人間たちが平和に暮らしているのだった。再びしずか、ジャイアン、スネ夫を連れてこの夢の国にやって来たドラえもんとのび太、しかし、ジャイアンとスネ夫は靄の中で背後に迫って来る無気味な気配に気付くのだった。それは、この国の神話に出てくる悪魔ニムゲだった。' },
    { id: 12, title: 'のび太のドラビアンナイト', year: 1991, revenue: '17.9億円', director: '芝山努', explain: 'ある日、絵本の世界を体験できる『絵本はいりこみぐつ』でいろいろな童話や物語を楽しんでいたのび太たち。ところが絵本の話なんか全部知っていると、ジャイアンとスネ夫は、たくさんの絵本をバラバラにしてその順番を目茶苦茶にしてしまう。怒って帰ろうとしたしずかは、帰る途中空飛ぶじゅうたんとぶつかり、片方のくつをなくしてしまう。翌日、くつが足りないことに気づいたドラえもんは大慌て。片一方だけだと絵本から出られないのだ。さらに絵本はのび太のママに燃やされされてしまうのだった。絵本の中に閉じ込められたしずかを助け出すため、『シンドバットの冒険』の物語を手掛かりに、タイムマシンでアラビアンナイトの世界へと向かい、その魔法と不思議がいっぱいの世界で様々な冒険を繰り広げるドラえもんたちは、しずかを助け出し、無事もとの世界に戻るのだった。' },
    { id: 13, title: 'のび太と雲の王国', year: 1992, revenue: '16.7億円', director: '芝山努', explain: '天国の存在を信じるのび太は皆にバカにされてしまい、ドラえもんの力を借りて天空に雲の王国を作り上げる。ところが空には別の王国があり、ドラえもん達はその王国に迷い込む。絶滅した動物が集められたその王国で、パルパルという少女と出会い、宿舎に案内されるが、素晴らしくもどこか怪しい世界に不安になってドラえもん達は脱出する。ところがしずか達が追っ手に捕まり、地上征服を企むグリオのノア計画の裁判で地球人代表として裁かれることに。そしてドラえもんとのび太は、ドンジャラ村のホイやタガロの力を借りて、しずか達を助けだし、地上絶滅の危機を救うのだった。' },
    { id: 14, title: 'のび太とブリキの迷宮（ラビリンス）', year: 1993, revenue: '16.3億円', director: '芝山努', explain: 'のび太のパパのところに不思議なトランクが届いた。開けると門が現れ、その先は一年中海水浴やスキーが楽しめ、ブリキのおもちゃだけが住むブリキン島。のび太とドラえもんはその島のブリキンホテルで大歓迎された。スキーで遊ぶうちにドラえもんとはぐれたのび太は、いったん戻ってからジャイアン、スネ夫、しずか達とホテルへ行くが、突然ブリキの飛行機の大群による爆撃を受けてしまう。ドラえもんは彼らに捕まっていた。びっくりするのび太達の前にサピオという少年が現れ、実はブリキン島はチャモチャ星人の宇宙船であることを告げる。島の地下の大迷宮には、ロボットから人間を救えるフロッピーが隠されていたのだった。' },
    { id: 15, title: 'のび太と夢幻三剣士', year: 1994, revenue: '13.3億円', director: '芝山努', explain: '自分が英雄になった夢を見たのび太はすっかり夢見ることに取り付かれてしまい、ドラえもんが出してくれた自分の思い通りに夢が見れる機械「気ままに夢見る機」に夢中になる。そんなある日、謎の男に「夢幻三剣士」という夢を見ることを薦められて、早速試みるのび太。「夢幻三剣士」の世界の中で、ユメミル国は妖霊大帝オドロームに侵略されていた。のび太はユメミル国を救うべく「白銀の剣士」になるために旅をする。' },
    { id: 16, title: 'のび太の創世日記', year: 1995, revenue: '12.8億円', director: '芝山努', explain: '夏休みも後半にさしかかっているというのに、のび太は宿題の自由研究に全然手をつけていない。そんなのび太のためにドラえもんは未来の世界から"創世セット"なるものを取り寄せてくれた。それは宇宙の誕生から地球の発生までを短時間で見せるもので、まさに自由研究にはピッタリだった。早速、のび太は良い世界を作ろうと神様になりきって、説明書通りに創世セットを作り始めた。多少の失敗もあったが、なんとか生命の誕生期までこぎつけたのび太とドラえもんは、様子を見るためにその地球に降り立った。しかし、生命の中心がまだ海の中であるのをじれったく思ったのび太は、ドラえもんに頼んで"進化退化放射線"を浴びせて魚の進化を速めてもらう。' },
    { id: 17, title: 'のび太と銀河超特急（エクスプレス）', year: 1996, revenue: '16.5億円', director: '芝山努', explain: 'ある日、ドラえもんは22世紀で人気の、宇宙空間を走るミステリー列車のチケットを購入して、のび太と一緒に行き先の分からない宇宙旅行へ出発した。途中からジャイアン、スネ夫、しずかも加わって、旅はますます楽しいのものになっていく。列車の行く先は、ハテハテ星群にある宇宙最大のテーマ・パーク"ドリーマーズ・ランド"だった。この星群は小惑星ひとつひとつが巨大な遊園地に改造されており、のび太とドラえもんは"西部の星"で22世紀の少年・アストンたちにバカにされながらも活躍を見せた。一方、ジャイアンとスネ夫は"忍者の星"でちょっとだけ忍術を使えるようになり、それぞれ楽しい一時を過ごしていた。' },
    { id: 18, title: 'のび太のねじ巻き都市（シティー）冒険記', year: 1997, revenue: '19.5億円', director: '芝山努', explain: 'ドラえもんが持っていた22世紀の福引きの外れ券で美しい小惑星を手に入れたのび太は、生命のネジを使って、しずかちゃんたちとそこにおもちゃの街“ねじ巻き都市"を作ることにした。ところが、エッグハウスで育てていたおもちゃのブタのピーブが、落雷の影響で突然進化を開始する。ほかのおもちゃたちの指導者となったピーブは、やがて自分たちの手で街の建設を始めた。' },
    { id: 19, title: 'のび太の南海大冒険', year: 1998, revenue: '21億円', director: '芝山努', explain: '夏休みの宿題に、しずかちゃんたちと海の研究をすることになったのび太。しかし、彼は「宝島」の本に夢中になるばかりで、ちっとも研究は進まない。それどころか、ドラえもんに本物の宝島に冒険がしたいと言い出したのである。いつもののび太のわがままに、仕方なく宝探しのセットを出してやるドラえもん。ふたりは、しずかちゃんたちを誘ってミニ帆船に乗り込むと、宝島へと出発するのであった。ドラえもんの出す様々なアトラクションで、即席の冒険を楽しむのび太たち。ところが、そんな彼らの目の前に本物の海賊船が出現したのである。' },
    { id: 20, title: 'のび太の宇宙漂流記', year: 1999, revenue: '20億円', director: '芝山努', explain: 'ほんものの宇宙を舞台にした・スター・クラッシュ・というゲームで遊んでいたのび太たち。ところが、ジャイアンとスネ夫がゲームの中で迷子になってしまった。しかも、ふたりが入ったゲームを謎のUFOが持ち去ってしまったから、さあ大変。焦ったドラえもんは、のび太が裏山で見つけた不思議な石を頼りに、・宇宙救命ボート・でUFOを追跡することになる。なんとかUFOに追いつき、ジャイアンとスネ夫に再会するドラえもんたち。彼らはそこで「宇宙少年騎士団」と名乗るUFOの乗組員のリアンたちと出会う。' },
    { id: 21, title: 'のび太の太陽王伝説', year: 2000, revenue: '30.5億円', director: '芝山努', explain: 'タイムホールの故障で、のび太の部屋と古代文明・マヤナ国が時空を超えて繋がってしまった。マヤナ国に迷い込んだのび太とドラえもんは、そこでのび太にそっくりな王子・ティオに出会う。魔女・レディナを倒し彼のお母さんである女王にかけられた呪いを解こうと、日夜ジャングルで修行を積んでいたティオ。日本に興味を持った彼は、顔がそっくりなのをいいことにのび太と入れ替わることを提案。日本で修行を積むことにする。一方ののび太も、王子様の生活が出来るとあって大喜び。だが、ふたりがそっくりなのは顔だけで性格は正反対。双方でハプニングが続出するのだった…。' },
    { id: 22, title: 'のび太と翼の勇者たち', year: 2001, revenue: '30.5億円', director: '芝山努', explain: '夏休みの課題で、しずかちゃんたちと渡り鳥の研究をしていたのび太は、裏山で鳥人間・グースケと出会い、彼の住む鳥人間の世界“バードピア“に迷い込んでしまう。そこは、人間世界で傷ついた鳥たちが羽根を休めに来る鳥と鳥人間のパラダイスだった。さて、ドラえもんの“バードキャップ“で鳥人間の仲間になったのび太たちは、“渡り鳥パトロール隊“の入隊テスト“イカロスレース“に出場することになる。果たして、過酷なレースを制したのはグースケとライヴァルのツバクロウ。ところが、幼い頃に空から落ちた記憶がトラウマとなり、自分の翼で飛べず人力飛行機・スノーグース号で参加していたグースケは、カラス警備隊長官・ジーグリードによって失格にされる…。' },
    { id: 23, title: 'のび太とロボット王国（キングダム）', year: 2002, revenue: '23.1億円', director: '芝山努', explain: 'かつては人間とロボットが仲良く平和に暮らしていたロボット王国。ロボットの人工知能は急速に進化し“感情”も持つようになったロボットたち。しかし、ジャンヌ女王は、ロボットから“感情”を抜き取り、奴隷として道具に改造し始めていた。女王はドロイド兵を使って町のロボットたちを捕まえていた。少年ポコとお母さんもドロイド兵に追われ、お母さんは捕まってしまう。ポコは逃げている途中でなぜか時空のひずみに入り込み地球に来てしまった。ポコと出会ったのび太たちは彼を助けるため、時空を逆に辿りポコが暮らしていた地を目指すのだったが…。' },
    { id: 24, title: 'のび太とふしぎ風使い', year: 2003, revenue: '25.4億円', director: '芝山努', explain: '台風の翌日、いたずら好きの台風の子供・フー子と仲良くなったのび太とドラえもんたちは、フー子を遊ばせるために訪れた“風の村”で、風の民・テムジンたちと知り合う。ところが、彼らと対立する“嵐族”のシャーマン、ウランダーにスネ夫が操られ、フー子とジャイアンがさらわれてしまった。3人を助けるべく、嵐族のアジトに向かったドラえもんたちは、そこでウランダーと嵐族のボス、ストームが、風の怪物・マフーガを蘇らせ世界征服を企んでいることを知る…。' },
    { id: 25, title: 'のび太のワンニャン時空伝', year: 2004, revenue: '30.5億円', director: '芝山努', explain: 'ある日、のび太は川でおぼれていた子犬を発見し助け出す。その子犬をイチと名付けたのび太は、そのまま家に連れ帰り、ママには内緒で自分の部屋で飼うことに。数日後、裏山に遊びに行ったのび太は、人間たちに捨てられたたくさんの犬や猫を目にして、人間の身勝手な振る舞いに怒りを覚えるのだった。そして、彼らを救うため、人間のまだ存在しない大昔に連れて行くことを思いつく。さっそく、スモールライトでイチやその他大勢の犬や猫を小さくすると、一緒にタイムマシンに乗り込み、人間が誕生するはるか以前の3億年前の地球へと向かうのだった…。' },
    { id: 26, title: 'のび太の恐竜2006', year: 2006, revenue: '32.8億円', director: '渡辺歩', explain: 'スネ夫に対抗して恐竜の化石探しをしていたのび太は、裏山の近くで恐竜のタマゴの化石を発見。孵化させてみると、なんと白亜紀の日本にいた“フタバスズキリュウ”という首長竜が生まれた！その恐竜の赤ちゃんに“ピー助”と名付けたのび太は、スネ夫やジャイアンを驚かせようとピー助を育て始めるも、すぐにピー助は公園の池でも飼えなくなってしまうほど成長し、町中が怪獣の噂で大騒ぎ。仕方なく、ドラえもんと共にピー助を白亜紀の日本に戻すのであったが、途中、ピー助を狙う謎の黒マスクの男に攻撃されたせいでタイムマシンが故障し、ピー助を間違って北アメリカに置いて来たことが判明する…。' },
    { id: 27, title: 'のび太の新魔界大冒険 〜7人の魔法使い〜', year: 2007, revenue: '35.4億円', director: '寺本幸代', explain: 'ある日、のび太は、「もしもボックス」で魔法の世界を作ってしまった。そこには元の世界と同じく、しずかちゃん、ジャイアン、スネ夫らがいた。しかし、魔法を使うにも学校の勉強が必要で、がっかりするのび太。やがてその世界の中で、ドラえもんとのび太たちは、魔法を自在に操る美夜子と、父の満月牧師に出会う。牧師の説では、魔界星が接近し、地球侵略を企てていると言う。怖くなったのび太は、元の世界に戻ろうとするが、ママに「もしもボックス」を捨てられてしまい、帰れなくなる。その間にも、魔界星はどんどん接近してきている。やがて一行は自分たちが地球を守る「七人の伝説の勇者」だったと知り、美夜子と共に魔界星に乗り込むことになる…。' },
    { id: 28, title: 'のび太と緑の巨人伝', year: 2008, revenue: '33.7億円', director: '渡辺歩', explain: '裏山の近くでのび太は小さな苗木を拾う。ドラえもんのひみつ道具「植物自動化液」をかけたことによって、苗木は意思を持ち、自由に動けるようになる。のび太は苗木にキー坊という名前を付け、家へ持ち帰り、弟のように可愛がりながら育てることにする。すばしっこくていたずらっ子なキー坊だが、日に日に考える力をもち、文字を書き、新聞を読んだりテレビのニュースを見たりして状況を理解するまでに知能が発達し、成長していく。ある日、ドラえもんたちがキー坊を連れて裏山へ行ったところ、突然、雷が光り巨大な渦が出現し、そこへ巻きこまれてしまう…。' },
    { id: 29, title: '新・のび太の宇宙開拓史', year: 2009, revenue: '24.5億円', director: '腰繁男', explain: 'ある日、超空間のねじれで、のび太の部屋の下と宇宙の彼方のコーヤコーヤ星がつながってしまう。そこは、豊かな自然にあふれた美しい星。さっそく開拓移民の少年ロップルと仲良くなったのび太たち。ところが、そんなコーヤコーヤ星にある不思議な石をめぐってガルタイト鉱業が恐るべき計画を進めていた。のび太とドラえもんは、コーヤコーヤ星とロップルたちを守るため立ち上がる。' },
    { id: 30, title: 'のび太の人魚大海戦', year: 2010, revenue: '31.6億円', director: '楠葉宏三', explain: 'ドラえもんがつくった架空の水で町全体を海の底にしたのび太とドラえもん。そこに本物の魚を泳がせて楽しんでいた2人は、5000年前に地球にやって来たという人魚族の王女ソフィアと偶然出会う。のび太たちは人魚スーツを着て一緒に海の冒険を満喫するが、そこへ人魚族が持つ伝説の“人魚の剣”を狙う恐ろしい怪魚族が現われる。ソフィアたちを守るため、のび太とドラえもんは人魚族と一緒に立ち上がる…。' },
    { id: 31, title: '新・のび太と鉄人兵団 〜はばたけ 天使たち〜', year: 2011, revenue: '24.6億円', director: '寺本幸代', explain: 'ある日、のび太の家の庭に空から巨大ロボットの部品が降ってきた。ドラえもんとのび太はそれを組み立てて巨大ロボット“ザンダクロス”を完成させる。ところが、そんな2人の前にロボットの持ち主だという不思議な少女リルルが現われる。彼女はなんと、惑星メカトピアが地球を征服するために送り込んだスパイロボットだったのだが…。' },
    { id: 32, title: 'のび太と奇跡の島 〜アニマル アドベンチャー〜', year: 2012, revenue: '36.2億円', director: '楠葉宏三', explain: '"タイムトリモチ"で、500年前に絶滅した巨大な鳥モアを捕まえてしまったのび太とドラえもん。2人は、絶滅動物を保護しているベレーガモンド島へ、モアを連れていくことにする。そこは"ゴールデンヘラクレス"と呼ばれる黄金のカブトムシの力に守られた不思議な島だった。ロッコロ族の少女コロンやドードー鳥のクラージョ、のび太にそっくりな少年ダッケと出会い、見たこともない動物たちと楽しく過ごすドラえもんたち。ところがそこへ、"ゴールデンヘラクレス"の力を狙う悪の商人シャーマンが現れる…。' },
    { id: 33, title: 'のび太のひみつ道具博物館', year: 2013, revenue: '39.5億円', director: '寺本幸代', explain: '昼寝中に怪盗DXと名乗る人物に首の鈴を盗まれてしまったドラえもん。のび太がシャーロック・ホームズセットを使って調査した処、あらゆるひみつ道具が展示されている未来の博物館「ひみつ道具博物館」にヒントがあることが分かる。鈴を探すために博物館に訪れたドラえもんたちは、案内役のクルトと共に博物館をみてまわることにする。そんな折、博物館に予告状が届いた。果たして怪盗DXの正体とその目的とは?' },
    { id: 34, title: '新・のび太の大魔境 〜ペコと5人の探検隊〜', year: 2014, revenue: '35.8億円', director: '八鍬新之介', explain: '地球にはまだ冒険できる秘境があると信じ込むのび太は、ある日、空き地で出会った子犬のペコが不思議な巨神像の写った写真を見つけたことから、未開のジャングルへ冒険の旅に出た。様々なピンチを乗り越えてたどり着いた先は、独自の進化を遂げた犬の王国だった。世界征服をもくろむ悪い大臣ダブンダラーから王国を取り戻すため、のび太たちの戦いが始まるが…。' },
    { id: 35, title: 'のび太の宇宙英雄記(スペースヒーローズ)', year: 2015, revenue: '39.3億円', director: '大杉宜弘', explain: 'テレビのヒーローに憧れ、みんなでヒーロー映画を作ろうと言い出したのび太。ドラえもんのひみつ道具「バーガー監督」を使い、「銀河防衛隊」というヒーローになって宇宙の平和を守るという筋書きの映画を撮り始める。ところが、地球に不時着していたポックル星人のアロンに本物のヒーローと間違われてしまい、一緒に宇宙に行くことに。ポックル星にたどり着いたのび太たちは、宇宙海賊が企む恐ろしい計画を知り、本物のヒーローになって戦うことになる。' },
    { id: 36, title: '新･のび太の日本誕生', year: 2016, revenue: '41.2億円', director: '八鍬新之介', explain: '家でも学校でも叱られてばかりののび太は家出しようと思い立つが、どこもかしこも私有地か国有地でどこにも自分の思い通りになる土地が見当たらない。最初は「無駄なことだからやめておけ」とのび太をバカにしたドラえもんたちも各々の理由で家出するも行くところがなく途方に暮れていた。それならばいっそのことまだ人間が誰も住んでいない旧石器時代の日本へ行こうと思い立ち、史上最大の家出へと出発した。誰にも邪魔されないユートピアが完成したが、一時帰宅したところ、本物の原始人と思しき少年ククルに出会う。ククルの一族であるヒカリ族は、凶暴なクラヤミ族と精霊王ギガゾンビの襲撃を受けたという。ドラえもんたちはヒカリ族を救うため、中国大陸へ向かうことにする。' },
    { id: 37, title: 'のび太の南極カチコチ大冒険', year: 2017, revenue: '44.3億円', director: '高橋敦史', explain: '真夏の暑さに耐えきれず、南太平洋に浮かぶ巨大な氷山にやってきたのび太たちは、ドラえもんの秘密道具「氷細工ごて」を使って遊園地を作っていたところ、氷の中から不思議なリングを見つける。詳しく調べると、そのリングが埋まっていた氷は、人が住んでいるはずもない10万年前の南極の氷だった。一行は、謎を解くため南極に向かうが、そこで氷に閉ざされた巨大な遺跡を発見する。' },
    { id: 38, title: 'のび太の宝島', year: 2018, revenue: '53.7億円', director: '今井一暁', explain: '宝島を発見することをジャイアンたちに宣言したのび太は、ドラえもんのひみつ道具「宝探し地図」を使って、宝島を探すことになった。その地図に指し示された場所は、太平洋上に新しい島が突然現れ、のび太たちは「ノビタオーラ号」と命名された船に乗って、島を目指そうとするが、あと少しで島に上陸する手前で海賊たちに襲われ、しずかがセーラと間違えられて海賊船にさらわれてしまう。海賊たちが逃げた後、のび太たちは海に漂う少年・フロックとペットのオウム型ロボット・クイズに出会う。フロックは海賊船から逃げたメカニックで、宝島の重要な秘密について知っていた。その後、のび太たちは海賊たちからしずかを助け出そうとし、宝島に眠る財宝に隠された秘密を探る。' },
    { id: 39, title: 'のび太の月面探査記', year: 2019, revenue: '50.2億円', director: '八鍬新之介', explain: '月面探査機がとらえた白い影がニュースとなり、それを「月のウサギだ」と主張したのび太は、周囲から笑われてしまう。そこで、ドラえもんのひみつ道具「異説クラブメンバーズバッジ」を使い、月の裏側にウサギ王国を作ることにしたのび太。そんなある日、不思議な転校生の少年ルカが現れ、のび太たちと一緒にウサギ王国に行くことになるのだが……。' },
    { id: 40, title: 'のび太の新恐竜', year: 2020, revenue: '33.5億円', director: '今井一暁', explain: 'ある時、恐竜博の化石発掘体験で化石を見つけたのび太は、それを恐竜のたまごだと信じ、ドラえもんのひみつ道具「タイムふろしき」で化石を元の状態に戻す。するとそこから、新種の双子の恐竜が生まれる。2匹をキューとミューと名づけて育てるのび太だったが、やがて限界がきてしまい、2匹を元の時代に返すことに。ドラえもんや仲間たちとともに6600万年前の世界へと旅立ったのび太は、キューとミューの仲間を探す中で謎の島にたどり着き……。' },
    { id: 41, title: 'のび太の宇宙小戦争 2021', year: 2022, revenue: '26.9億円', director: '山口晋', explain: '夏休みのある日、のび太が拾った小さなロケットの中から、手のひらサイズの宇宙人パピが現れる。パピは、宇宙の彼方の小さな星、ピリカ星の大統領で、反乱軍から逃れて地球にやってきたという。スモールライトで自分たちも小さくなり、パピと一緒に時間を過ごすのび太やドラえもんたち。しかし、パピを追って地球にやってきた宇宙戦艦が、パピを捕らえるためのび太たちにも攻撃を仕掛けてくる。責任を感じたパピは、ひとり反乱軍に立ち向かおうとするが……。' },
    { id: 42, title: 'のび太と空の理想郷', year: 2023, revenue: '43.4億円', director: '堂山卓見', explain: '空に浮かぶ謎の三日月型の島を見つけたのび太は、ドラえもんたちと一緒にひみつ道具の飛行船「タイムツェッペリン」で、その島を目指して旅立つ。やがてたどり着いたその場所は、誰もがパーフェクトになれる夢のような楽園「パラダピア」だった。ドラえもんとのび太たちは、そこで何もかも完璧なパーフェクトネコ型ロボットのソーニャと出会い、仲良くなる。しかし、その夢のような楽園には、大きな秘密が隠されていた。' },
    { id: 43, title: 'のび太の地球交響楽', year: 2024, revenue: '43.1億円', director: '今井一暁', explain: '学校の音楽会に向けて、苦手なリコーダーの練習をしているのび太の前に、不思議な少女ミッカが現れる。のび太の奏でるのんびりとした音色が気に入ったミッカは、音楽がエネルギーになる惑星でつくられた「音楽（ファーレ）の殿堂」にドラえもんやのび太たちを招待する。ミッカはファーレの殿堂を復活させるために必要な音楽を一緒に演奏する、音楽の達人を探していたのだ。ドラえもんたちはひみつ道具「音楽家ライセンス」を使って殿堂の復活のため音楽を奏でるが、そこへ世界から音楽を消してしまう不気味な生命体が迫ってくる。' },

];
let nextId = 44; // 次に新規追加するときに使うID

let elementList = [
    { number: 1, symbol: 'H', name: '水素', mass: 1.0, explain: '最も軽い元素。宇宙で最も豊富に存在する。' },
    { number: 2, symbol: 'He', name: 'ヘリウム', mass: 4.0, explain: '2番目に軽い元素。風船や声を変えるガスに使われる。' },
    { number: 3, symbol: 'Li', name: 'リチウム', mass: 6.9, explain: '最も軽い金属。電池の材料として重要。' },
    { number: 4, symbol: 'Be', name: 'ベリリウム', mass: 9.0, explain: '毒性があるが、軽くて強い合金の材料になる。' },
    { number: 5, symbol: 'B', name: 'ホウ素', mass: 10.8, explain: '耐熱ガラスや磁石の材料に使われる。' },
    { number: 6, symbol: 'C', name: '炭素', mass: 12.0, explain: '生命の基本となる元素。ダイヤモンドや鉛筆の芯も炭素。' },
    { number: 7, symbol: 'N', name: '窒素', mass: 14.0, explain: '空気の約78%を占める気体。タンパク質の元になる重要な元素。' },
    { number: 8, symbol: 'O', name: '酸素', mass: 16.0, explain: '呼吸に必要な気体。地殻中に最も多く存在する。' },
    { number: 9, symbol: 'F', name: 'フッ素', mass: 19.0, explain: '非常に反応性が高い。歯磨き粉やフライパンの加工（テフロン）に使われる。' },
    { number: 10, symbol: 'Ne', name: 'ネオン', mass: 20.2, explain: '反応しにくい気体。ネオンサインとして赤く光る。' },
    { number: 11, symbol: 'Na', name: 'ナトリウム', mass: 23.0, explain: '水と激しく反応する金属。食塩（塩化ナトリウム）の成分。' },
    { number: 12, symbol: 'Mg', name: 'マグネシウム', mass: 24.3, explain: '実用金属の中で最も軽い。葉緑素の中心にある元素。' },
    { number: 13, symbol: 'Al', name: 'アルミニウム', mass: 27.0, explain: '軽くて加工しやすい。1円玉のアルミ缶、窓枠に使われる。' },
    { number: 14, symbol: 'Si', name: 'ケイ素', mass: 28.1, explain: '半導体の材料として重要。岩石やガラスの主成分。' },
    { number: 15, symbol: 'P', name: 'リン', mass: 31.0, explain: 'DNAの成分であり、エネルギー代謝に必須。マッチの材料にもなる。' },
    { number: 16, symbol: 'S', name: '硫黄', mass: 32.1, explain: '火山の噴気孔に見られる黄色い固体。火薬や温泉の成分。' },
    { number: 17, symbol: 'Cl', name: '塩素', mass: 35.5, explain: '殺菌作用がある気体。漂白剤や水道水の消毒に使われる。' },
    { number: 18, symbol: 'Ar', name: 'アルゴン', mass: 39.9, explain: '空気中に3番目に多い気体。蛍光灯や溶接ガスに使われる。' },
    { number: 19, symbol: 'K', name: 'カリウム', mass: 39.1, explain: '植物の成長に必須な肥料の三要素の一つ。神経伝達にも関わる。' },
    { number: 20, symbol: 'Ca', name: 'カルシウム', mass: 40.1, explain: '骨や歯の主成分。コンクリートの材料（石灰岩）でもある。' },
    { number: 26, symbol: 'Fe', name: '鉄', mass: 55.8, explain: '安価で強靭な金属。産業の中心的素材であり、血液中にも存在する。' },
    { number: 29, symbol: 'Cu', name: '銅', mass: 63.5, explain: '電気をよく通す赤色の金属。電線や10円玉に使われる。' },
    { number: 47, symbol: 'Ag', name: '銀', mass: 107.9, explain: '金属の中で最も電気と熱をよく通す。食器や装飾品に使われる。' },
    { number: 78, symbol: 'Pt', name: '白金', mass: 195.1, explain: 'プラチナと呼ばれる非常に希少な貴金属。触媒としても重要。' },
    { number: 79, symbol: 'Au', name: '金', mass: 197.0, explain: '美しい輝きを持つ貴金属。非常に錆びにくい。' },
    { number: 80, symbol: 'Hg', name: '水銀', mass: 200.6, explain: '常温で液体の唯一の金属。温度計や蛍光灯に使われる。' },
    { number: 92, symbol: 'U', name: 'ウラン', mass: 238.0, explain: '放射性元素。原子力発電の燃料として利用される。' }
];

// =================================================================
// システム3：FE風花雪月 武器データ（剣・槍・斧・弓・籠手）
// =================================================================
let weaponList = [
    // --- 剣 (Sword) ---
    { id: 1, name: '訓練用剣', type: '剣', might: 3, hit: 100, critical: 0, range: '1', weight: 4, rank: 'E', explain: '訓練用の安価な剣。性能は低い。' },
    { id: 2, name: '鉄の剣', type: '剣', might: 5, hit: 90, critical: 0, range: '1', weight: 5, rank: 'E', explain: '標準的な剣。安価で扱いやすい。' },
    { id: 3, name: '鋼の剣', type: '剣', might: 8, hit: 85, critical: 0, range: '1', weight: 10, rank: 'D', explain: '鉄の剣よりも威力は高いが、重く命中が少し低い。' },
    { id: 4, name: '銀の剣', type: '剣', might: 12, hit: 90, critical: 0, range: '1', weight: 8, rank: 'B', explain: '高価だが、威力・命中ともに優れた良質な剣。' },
    { id: 5, name: '勇者の剣', type: '剣', might: 9, hit: 75, critical: 0, range: '1', weight: 12, rank: 'B', explain: '自分から攻撃した時、2回連続で攻撃できる。' },
    { id: 6, name: 'キルソード', type: '剣', might: 8, hit: 85, critical: 25, range: '1', weight: 10, rank: 'C', explain: '必殺の一撃が出やすい、鋭い剣。' },
    { id: 7, name: 'サンダーソード', type: '剣', might: 9, hit: 70, critical: 0, range: '1-2', weight: 9, rank: 'C', explain: '魔法武器。雷の魔力が込められており、遠距離攻撃が可能。' },
    { id: 8, name: 'アーマーキラー', type: '剣', might: 8, hit: 80, critical: 0, range: '1', weight: 11, rank: 'D', explain: '重装特効。厚い鎧を貫くことができ、アーマー系に大ダメージ。' },
    { id: 9, name: 'レイピア', type: '剣', might: 7, hit: 95, critical: 10, range: '1', weight: 5, rank: 'E', explain: '重装・騎馬特効。敵の隙を突きやすく、特定の兵種に強い。' },
    { id: 10, name: '天帝の剣', type: '剣', might: 7, hit: 90, critical: 0, range: '1-2', weight: 9, rank: 'E', explain: '主人公専用。伝説の英雄の遺産。戦技「破天」が使用可能。' },

    // --- 槍 (Lance) ---
    { id: 11, name: '鉄の槍', type: '槍', might: 6, hit: 80, critical: 0, range: '1', weight: 6, rank: 'E', explain: '標準的な槍。剣よりも少し威力が高く命中が低い。' },
    { id: 12, name: '手槍', type: '槍', might: 7, hit: 75, critical: 0, range: '1-2', weight: 6, rank: 'D', explain: '投擲用の槍。近距離と遠距離の両方に対応できる。' },
    { id: 13, name: '鋼の槍', type: '槍', might: 9, hit: 75, critical: 0, range: '1', weight: 11, rank: 'D', explain: '威力は十分だが、重いため追撃を受けやすい。' },
    { id: 14, name: '銀の槍', type: '槍', might: 13, hit: 80, critical: 0, range: '1', weight: 9, rank: 'B', explain: '熟練者が扱う高級な槍。高い威力を誇る。' },
    { id: 15, name: 'ナイトキラー', type: '槍', might: 8, hit: 70, critical: 0, range: '1', weight: 8, rank: 'D', explain: '騎馬特効。馬に乗った敵に対して絶大な威力を発揮する。' },
    { id: 16, name: '破裂の槍', type: '槍', might: 22, hit: 65, critical: 20, range: '1', weight: 9, rank: 'E', explain: '英雄の遺産。禍々しい形状の槍。戦技「裂空」が使用可能。' },

    // --- 斧 (Axe) ---
    { id: 17, name: '鉄の斧', type: '斧', might: 8, hit: 70, critical: 0, range: '1', weight: 7, rank: 'E', explain: '標準的な斧。威力は高いが命中が不安。' },
    { id: 18, name: '手斧', type: '斧', might: 8, hit: 60, critical: 0, range: '1-2', weight: 7, rank: 'D', explain: '投擲用の斧。遠距離攻撃が可能だが命中は低い。' },
    { id: 19, name: '鋼の斧', type: '斧', might: 11, hit: 65, critical: 0, range: '1', weight: 12, rank: 'D', explain: '非常に重いが、一撃の威力は強力。' },
    { id: 20, name: '銀の斧', type: '斧', might: 16, hit: 70, critical: 0, range: '1', weight: 10, rank: 'B', explain: '最高クラスの威力を持つ斧。' },
    { id: 21, name: 'ハンマー', type: '斧', might: 10, hit: 60, critical: 0, range: '1', weight: 15, rank: 'D', explain: '重装特効。硬い鎧を叩き割るための巨大な槌。' },
    { id: 22, name: 'アイムール', type: '斧', might: 24, hit: 60, critical: 20, range: '1', weight: 11, rank: 'E', explain: '英雄の遺産。紋章石が埋め込まれた巨大な斧。戦技「狂嵐」が使用可能。' },

    // --- 弓 (Bow) ---
    { id: 23, name: '鉄の弓', type: '弓', might: 6, hit: 85, critical: 0, range: '2', weight: 6, rank: 'E', explain: '標準的な弓。飛行系の敵に特効を持つ。' },
    { id: 24, name: '鋼の弓', type: '弓', might: 9, hit: 80, critical: 0, range: '2', weight: 11, rank: 'D', explain: '威力を重視した弓。重いため速さが下がる。' },
    { id: 25, name: '銀の弓', type: '弓', might: 13, hit: 90, critical: 0, range: '2', weight: 9, rank: 'B', explain: '命中精度と威力を兼ね備えた強力な弓。' },
    { id: 26, name: 'ロングボウ', type: '弓', might: 6, hit: 80, critical: 0, range: '2-3', weight: 13, rank: 'C', explain: '射程が長い弓。遠くの敵を一方的に攻撃できる。' },
    { id: 27, name: 'フェイルノート', type: '弓', might: 18, hit: 75, critical: 20, range: '2-3', weight: 9, rank: 'E', explain: '英雄の遺産。決して外れないと言われる魔弓。戦技「落星」が使用可能。' },

    // --- 籠手 (Gauntlets) ---
    { id: 28, name: '鉄の籠手', type: '籠手', might: 1, hit: 85, critical: 0, range: '1', weight: 3, rank: 'E', explain: '格闘用の武器。自分から攻撃すると必ず2回連続攻撃になる。' },
    { id: 29, name: '銀の籠手', type: '籠手', might: 4, hit: 85, critical: 0, range: '1', weight: 5, rank: 'B', explain: '威力が高められた籠手。魔法職には装備できない。' },
    { id: 30, name: 'キラーナックル', type: '籠手', might: 3, hit: 80, critical: 20, range: '1', weight: 7, rank: 'C', explain: '必殺の一撃を狙いやすい籠手。4回攻撃で必殺を連発できることも。' }
];
let nextWeaponId = 31;

// 1. トップページ（一覧画面へ転送）
app.get("/", (req, res) => {
    res.redirect('/doraemon');
});

// 2. 一覧表示画面
app.get("/doraemon", (req, res) => {
    res.render('doraemon_list', { data: doraemonList });
});


app.get("/doraemon/create", (req, res) => {
    res.render('doraemon_create');
});

// 5. 新規追加の実行処理 (POST)
app.post("/doraemon/create", (req, res) => {
    const newItem = {
        id: nextId++,
        title: req.body.title,
        year: parseInt(req.body.year),
        revenue: req.body.revenue,
        director: req.body.director,
        explain: req.body.explain
    };
    doraemonList.push(newItem);
    res.redirect('/doraemon');
});
// ----------------------------------------------------

// 3. 詳細表示画面
app.get("/doraemon/:id", (req, res) => {
    const id = parseInt(req.params.id);
    const target = doraemonList.find(item => item.id === id);
    target ? res.render('doraemon_detail', { item: target }) : res.status(404).send("指定された映画は見つかりません。");
});

// 6. 編集画面
app.get("/doraemon/edit/:id", (req, res) => {
    const id = parseInt(req.params.id);
    const target = doraemonList.find(item => item.id === id);
    target ? res.render('doraemon_edit', { item: target }) : res.status(404).send("編集対象が見つかりません。");
});

// 7. 更新実行処理 (POST)
app.post("/doraemon/update/:id", (req, res) => {
    const id = parseInt(req.params.id);
    const index = doraemonList.findIndex(item => item.id === id);

    if (index !== -1) {
        doraemonList[index] = {
            id: id,
            title: req.body.title,
            year: parseInt(req.body.year),
            revenue: req.body.revenue,
            director: req.body.director,
            explain: req.body.explain
        };
        res.redirect(`/doraemon/${id}`);
    } else {
        res.status(404).send("更新できませんでした。");
    }
});

// 8. 削除実行処理 (POST)
app.post("/doraemon/delete/:id", (req, res) => {
    const id = parseInt(req.params.id);
    doraemonList = doraemonList.filter(item => item.id !== id);
    res.redirect('/doraemon');
});


// 一覧表示（変更なし）
app.get("/element", (req, res) => {
    elementList.sort((a, b) => a.number - b.number);
    res.render('element_list', { data: elementList });
});

// 新規作成画面（変更なし）
app.get("/element/create", (req, res) => {
    res.render('element_create');
});

// ★新規作成実行（massを追加）
app.post("/element/create", (req, res) => {
    const newItem = {
        number: parseInt(req.body.number),
        symbol: req.body.symbol,
        name: req.body.name,
        mass: parseFloat(req.body.mass), // 小数も扱えるようにparseFloat
        explain: req.body.explain
    };
    elementList.push(newItem);
    res.redirect('/element');
});

// 詳細表示（変更なし）
app.get("/element/:number", (req, res) => {
    const number = parseInt(req.params.number);
    const target = elementList.find(item => item.number === number);
    target ? res.render('element_detail', { item: target }) : res.status(404).send("指定された元素は見つかりません。");
});

// 編集画面（変更なし）
app.get("/element/edit/:number", (req, res) => {
    const number = parseInt(req.params.number);
    const target = elementList.find(item => item.number === number);
    target ? res.render('element_edit', { item: target }) : res.status(404).send("編集対象が見つかりません。");
});

// ★更新実行（massを追加）
app.post("/element/update/:number", (req, res) => {
    const number = parseInt(req.params.number);
    const index = elementList.findIndex(item => item.number === number);

    if (index !== -1) {
        elementList[index] = {
            number: number,
            symbol: req.body.symbol,
            name: req.body.name,
            mass: parseFloat(req.body.mass), // ここを追加
            explain: req.body.explain
        };
        res.redirect(`/element/${number}`);
    } else {
        res.status(404).send("更新できませんでした。");
    }
});

// 削除実行（変更なし）
app.post("/element/delete/:number", (req, res) => {
    const number = parseInt(req.params.number);
    elementList = elementList.filter(item => item.number !== number);
    res.redirect('/element');
});

// -----------------------------------------------------------------
// 3. 武器システム
// -----------------------------------------------------------------

// 一覧表示
app.get("/weapon", (req, res) => {
    res.render('weapon_list', { data: weaponList });
});

// 新規作成画面
app.get("/weapon/create", (req, res) => {
    res.render('weapon_create');
});

// 新規作成実行
app.post("/weapon/create", (req, res) => {
    const newWeapon = {
        id: nextWeaponId++,
        name: req.body.name,
        type: req.body.type,
        might: parseInt(req.body.might),
        hit: parseInt(req.body.hit),
        critical: parseInt(req.body.critical), // 追加
        range: req.body.range,                 // 追加
        weight: parseInt(req.body.weight),     // 追加
        rank: req.body.rank,
        explain: req.body.explain
    };
    weaponList.push(newWeapon);
    res.redirect('/weapon');
});

// 詳細表示
app.get("/weapon/:id", (req, res) => {
    const id = parseInt(req.params.id);
    const target = weaponList.find(item => item.id === id);
    target ? res.render('weapon_detail', { item: target }) : res.status(404).send("指定された武器は見つかりません。");
});

// 編集画面
app.get("/weapon/edit/:id", (req, res) => {
    const id = parseInt(req.params.id);
    const target = weaponList.find(item => item.id === id);
    target ? res.render('weapon_edit', { item: target }) : res.status(404).send("編集対象が見つかりません。");
});

// 更新実行
app.post("/weapon/update/:id", (req, res) => {
    const id = parseInt(req.params.id);
    const index = weaponList.findIndex(item => item.id === id);

    if (index !== -1) {
        weaponList[index] = {
            id: id,
            name: req.body.name,
            type: req.body.type,
            might: parseInt(req.body.might),
            hit: parseInt(req.body.hit),
            critical: parseInt(req.body.critical), // 追加
            range: req.body.range,                 // 追加
            weight: parseInt(req.body.weight),     // 追加
            rank: req.body.rank,
            explain: req.body.explain
        };
        res.redirect(`/weapon/${id}`);
    } else {
        res.status(404).send("更新できませんでした。");
    }
});

// 削除実行
app.post("/weapon/delete/:id", (req, res) => {
    const id = parseInt(req.params.id);
    weaponList = weaponList.filter(item => item.id !== id);
    res.redirect('/weapon');
});

// サーバー起動
app.listen(8080, () => console.log("Server running on port 8080"))